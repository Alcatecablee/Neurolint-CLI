{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://neurolint.dev/schemas/neurolint-config.schema.json",
  "title": "NeuroLint Configuration",
  "description": "Schema for .neurolintrc configuration files",
  "type": "object",
  "properties": {
    "$schema": {
      "type": "string",
      "description": "JSON Schema reference for IDE validation"
    },
    "version": {
      "type": "string",
      "description": "Configuration schema version",
      "default": "1.0"
    },
    "extends": {
      "oneOf": [
        { "type": "string" },
        { "type": "array", "items": { "type": "string" } }
      ],
      "description": "Extend from shared configurations"
    },
    "layers": {
      "type": "object",
      "description": "Configure which transformation layers are enabled",
      "properties": {
        "config": {
          "type": "boolean",
          "default": true,
          "description": "Layer 1: Configuration modernization"
        },
        "patterns": {
          "type": "boolean",
          "default": true,
          "description": "Layer 2: Pattern standardization"
        },
        "components": {
          "type": "boolean",
          "default": true,
          "description": "Layer 3: Accessibility & React components"
        },
        "hydration": {
          "type": "boolean",
          "default": true,
          "description": "Layer 4: SSR/Hydration safety"
        },
        "nextjs": {
          "type": "boolean",
          "default": true,
          "description": "Layer 5: Next.js App Router optimization"
        },
        "testing": {
          "type": "boolean",
          "default": true,
          "description": "Layer 6: Testing & error handling"
        },
        "adaptive": {
          "type": "boolean",
          "default": false,
          "description": "Layer 7: Adaptive pattern learning"
        },
        "security": {
          "type": "boolean",
          "default": true,
          "description": "Layer 8: Security forensics"
        }
      }
    },
    "include": {
      "type": "array",
      "items": { "type": "string" },
      "description": "Glob patterns for files to include",
      "default": ["**/*.{js,jsx,ts,tsx}"]
    },
    "exclude": {
      "type": "array",
      "items": { "type": "string" },
      "description": "Glob patterns for files to exclude",
      "default": ["node_modules/**", "dist/**", "build/**", ".next/**"]
    },
    "backup": {
      "type": "object",
      "description": "Backup configuration",
      "properties": {
        "enabled": {
          "type": "boolean",
          "default": true
        },
        "directory": {
          "type": "string",
          "default": ".neurolint-backups"
        },
        "maxBackups": {
          "type": "integer",
          "minimum": 1,
          "maximum": 100,
          "default": 10
        },
        "encryption": {
          "type": "boolean",
          "default": false,
          "description": "Encrypt backup files"
        }
      }
    },
    "validation": {
      "type": "object",
      "description": "Transformation validation settings",
      "properties": {
        "syntaxCheck": {
          "type": "boolean",
          "default": true,
          "description": "Validate syntax after transformation"
        },
        "semanticCheck": {
          "type": "boolean",
          "default": true,
          "description": "Validate semantic integrity"
        },
        "revertOnFailure": {
          "type": "boolean",
          "default": true,
          "description": "Auto-revert if validation fails"
        }
      }
    },
    "security": {
      "type": "object",
      "description": "Security scanning configuration",
      "properties": {
        "scanMode": {
          "type": "string",
          "enum": ["quick", "standard", "deep", "paranoid"],
          "default": "standard"
        },
        "enableIocDetection": {
          "type": "boolean",
          "default": true
        },
        "enableCveScanning": {
          "type": "boolean",
          "default": true
        },
        "enableBaselineVerification": {
          "type": "boolean",
          "default": false
        },
        "customIocPatterns": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "id": { "type": "string" },
              "pattern": { "type": "string" },
              "severity": { "type": "string", "enum": ["critical", "high", "medium", "low", "info"] },
              "message": { "type": "string" }
            },
            "required": ["id", "pattern", "severity", "message"]
          },
          "description": "Custom IoC patterns to detect"
        }
      }
    },
    "rules": {
      "type": "object",
      "description": "Custom rule configurations",
      "additionalProperties": {
        "oneOf": [
          { "type": "boolean" },
          { "type": "string", "enum": ["off", "warn", "error"] },
          {
            "type": "array",
            "items": [
              { "type": "string", "enum": ["off", "warn", "error"] }
            ],
            "additionalItems": true
          }
        ]
      }
    },
    "output": {
      "type": "object",
      "description": "Output configuration",
      "properties": {
        "format": {
          "type": "string",
          "enum": ["text", "json", "sarif", "html"],
          "default": "text"
        },
        "verbose": {
          "type": "boolean",
          "default": false
        },
        "color": {
          "type": "boolean",
          "default": true
        },
        "reportFile": {
          "type": "string",
          "description": "Path to write report file"
        }
      }
    },
    "cicd": {
      "type": "object",
      "description": "CI/CD integration settings",
      "properties": {
        "failOnIssues": {
          "type": "boolean",
          "default": false,
          "description": "Exit with non-zero code if issues found"
        },
        "failThreshold": {
          "type": "string",
          "enum": ["critical", "high", "medium", "low", "info"],
          "default": "high",
          "description": "Minimum severity to trigger failure"
        },
        "annotations": {
          "type": "boolean",
          "default": true,
          "description": "Output GitHub Actions annotations"
        }
      }
    }
  }
}
